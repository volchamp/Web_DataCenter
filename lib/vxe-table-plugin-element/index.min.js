!function(e,t){if("function"==typeof define&&define.amd)define("vxe-table-plugin-element",["exports","xe-utils"],t);else if("undefined"!=typeof exports)t(exports,require("xe-utils"));else{var r={exports:{}};t(r.exports,e.XEUtils),e.VXETablePluginElement=r.exports.default}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(e,w){"use strict";var t;function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(e){return null==e||""===e}function l(){return"value"}function c(e,t){return e&&t.valueFormat?w.default.toStringDate(e,t.valueFormat):e}function d(e,t,r){return w.default.toDateString(c(e,t),t.format||r)}function p(e,t,r,n){return w.default.map(e,function(e){return d(e,t,n)}).join(r)}function i(e,t,r,n){return(e=d(e,r,n))>=d(t[0],r,n)&&e<=d(t[1],r,n)}function g(e,t,r,n){var o=t.$table.vSize;return w.default.assign(o?{size:o}:{},n,e.props,a({},l(),r))}function b(e,t,r,n){var o=t.$form.vSize;return w.default.assign(o?{size:o}:{},n,e.props,a({},l(),r))}function u(e,o,t,n){var a=e.events,r="input",l=function(e){var t="change";switch(e.name){case"ElAutocomplete":t="select";break;case"ElInput":case"ElInputNumber":t="input"}return t}(e),u=l===r,i={};return w.default.objectEach(a,function(n,e){i[e]=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.apply(void 0,[o].concat(t))}}),t&&(i[r]=function(e){t(e),a&&a[r]&&a[r](e),u&&n&&n()}),!u&&n&&(i[l]=function(){if(n(),a&&a[l]){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];a[l].apply(a,[o].concat(t))}}),i}function h(e,t){var r=t.$table,n=t.row,o=t.column;return u(e,t,function(e){w.default.set(n,o.property,e)},function(){r.updateStatus(t)})}function v(e,t,r,n){return u(e,t,function(e){r.data=e},n)}function E(e,t){var r=t.$form,n=t.data,o=t.property;return u(e,t,function(e){w.default.set(n,o,e)},function(){r.updateStatus(t)})}function n(e,t){var r,o,n=e.options,a=void 0===n?[]:n,l=e.optionGroups,u=e.props,i=void 0===u?{}:u,d=e.optionProps,p=void 0===d?{}:d,f=e.optionGroupProps,c=void 0===f?{}:f,s=t.$table,v=t.row,m=t.column,y=p.label||"label",g=p.value||"value",b=c.options||"options",h=w.default.get(v,m.property),E=m.id;if(i.filterable){var M=s.fullAllDataRowMap;if(M.has(v)&&(r=M.get(v),o=(o=r.cellData)||(M.get(v).cellData={})),r&&o[E]&&o[E].value===h)return o[E].label}return k(h)?null:w.default.map(i.multiple?h:[h],l?function(t){for(var e,r=0;r<l.length&&!(e=w.default.find(l[r][b],function(e){return e[g]===t}));r++);var n=e?e[y]:t;return o&&a&&a.length&&(o[E]={value:h,label:n}),n}:function(t){var e=w.default.find(a,function(e){return e[g]===t}),r=e?e[y]:t;return o&&a&&a.length&&(o[E]={value:h,label:r}),r}).join(", ")}function o(e,t){var r=e.props,n=void 0===r?{}:r,o=t.row,a=t.column,l=w.default.get(o,a.property)||[],u=[];return function t(r,e,n,o){var a=n[r];e&&n.length>r&&w.default.each(e,function(e){e.value===a&&(o.push(e.label),t(++r,e.children,n,o))})}(0,n.options,l,u),(!1===n.showAllLevels?u.slice(u.length-1,u.length):u).join(" ".concat(n.separator||"/"," "))}function f(e,t){var r=e.props,n=void 0===r?{}:r,o=t.row,a=t.column,l=n.rangeSeparator,u=void 0===l?"-":l,i=w.default.get(o,a.property);switch(n.type){case"week":i=d(i,n,"yyyywWW");break;case"month":i=d(i,n,"yyyy-MM");break;case"year":i=d(i,n,"yyyy");break;case"dates":i=p(i,n,", ","yyyy-MM-dd");break;case"daterange":i=p(i,n," ".concat(u," "),"yyyy-MM-dd");break;case"datetimerange":i=p(i,n," ".concat(u," "),"yyyy-MM-dd HH:ss:mm");break;case"monthrange":i=p(i,n," ".concat(u," "),"yyyy-MM");break;default:i=d(i,n,"yyyy-MM-dd")}return i}function s(e,t){var r=e.props,n=void 0===r?{}:r,o=t.row,a=t.column,l=n.isRange,u=n.format,i=void 0===u?"hh:mm:ss":u,d=n.rangeSeparator,p=void 0===d?"-":d,f=w.default.get(o,a.property);return f&&l&&(f=w.default.map(f,function(e){return w.default.toDateString(c(e,n),i)}).join(" ".concat(p," "))),w.default.toDateString(c(f,n),i)}function r(u){return function(e,t,r){var n=r.row,o=r.column,a=t.attrs,l=w.default.get(n,o.property);return[e(t.name,{attrs:a,props:g(t,r,l,u),on:h(t,r)})]}}function m(e,t,r){return[e("el-button",{attrs:t.attrs,props:g(t,r,null),on:u(t,r)},D(e,t.content))]}function y(i){return function(n,o,a){var e=a.column,l=o.name,u=o.attrs;return e.filters.map(function(e,t){var r=e.data;return n(l,{key:t,attrs:u,props:g(o,a,r,i),on:v(o,a,e,function(){M(a,!!e.data,e)})})})}}function M(e,t,r){e.$panel.changeOption({},t,r)}function x(e){var t=e.option,r=e.row,n=e.column,o=t.data;return w.default.get(r,n.property)==o}function I(r,e,t){var n=t.label||"label",o=t.value||"value",a=t.disabled||"disabled";return w.default.map(e,function(e,t){return r("el-option",{key:t,props:{value:e[o],label:e[n],disabled:e[a]}})})}function D(e,t){return[""+(k(t)?"":t)]}function P(a){return function(e,t,r){var n=r.data,o=r.property;return[e(t.name,{attrs:t.attrs,props:b(t,r,w.default.get(n,o),a),on:E(t,r)})]}}function S(e,t,r){var n=t.attrs,o=b(t,r,null);return[e("el-button",{attrs:n,props:o,on:u(t,r)},D(0,t.content||o.content))]}function _(t,e){var r=e?"editRender":"cellRender";return function(e){return t(e.column[r],e)}}function F(){return function(r,e,t){var n=e.name,o=e.options,a=void 0===o?[]:o,l=e.optionProps,u=void 0===l?{}:l,i=e.attrs,d=t.data,p=t.property,f=u.label||"label",c=u.value||"value",s=u.disabled||"disabled",v=w.default.get(d,p);return[r("".concat(n,"Group"),{attrs:i,props:b(e,t,v),on:E(e,t)},a.map(function(e,t){return r(n,{key:t,props:{label:e[c],disabled:e[s]}},e[f])}))]}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.VXETablePluginElement=void 0,w=(t=w)&&t.__esModule?t:{default:t};var C={ElAutocomplete:{autofocus:"input.el-input__inner",renderDefault:r(),renderEdit:r(),renderFilter:y(),filterMethod:x,renderItem:P()},ElInput:{autofocus:"input.el-input__inner",renderDefault:r(),renderEdit:r(),renderFilter:y(),filterMethod:x,renderItem:P()},ElInputNumber:{autofocus:"input.el-input__inner",renderDefault:r(),renderEdit:r(),renderFilter:y(),filterMethod:x,renderItem:P()},ElSelect:{renderEdit:function(r,e,t){var n=e.options,o=void 0===n?[]:n,a=e.optionGroups,l=e.optionProps,u=void 0===l?{}:l,i=e.optionGroupProps,d=void 0===i?{}:i,p=t.row,f=t.column,c=e.attrs,s=g(e,t,w.default.get(p,f.property)),v=h(e,t);if(a){var m=d.options||"options",y=d.label||"label";return[r("el-select",{attrs:c,props:s,on:v},w.default.map(a,function(e,t){return r("el-option-group",{key:t,props:{label:e[y]}},I(r,e[m],u))}))]}return[r("el-select",{props:s,attrs:c,on:v},I(r,o,u))]},renderCell:function(e,t,r){return D(0,n(t,r))},renderFilter:function(n,o,a){var e=o.options,l=void 0===e?[]:e,u=o.optionGroups,t=o.optionProps,i=void 0===t?{}:t,r=o.optionGroupProps,d=void 0===r?{}:r,p=a.column,f=o.attrs;if(u){var c=d.options||"options",s=d.label||"label";return p.filters.map(function(e,t){var r=e.data;return n("el-select",{key:t,attrs:f,props:g(o,a,r),on:v(o,a,e,function(){M(a,e.data&&0<e.data.length,e)})},w.default.map(u,function(e,t){return n("el-option-group",{key:t,props:{label:e[s]}},I(n,e[c],i))}))})}return p.filters.map(function(e,t){var r=e.data;return n("el-select",{key:t,attrs:f,props:g(o,a,r),on:v(o,a,e,function(){M(a,e.data&&0<e.data.length,e)})},I(n,l,i))})},filterMethod:function(e){var t=e.option,r=e.row,n=e.column,o=t.data,a=n.property,l=n.filterRender.props,u=void 0===l?{}:l,i=w.default.get(r,a);return u.multiple?w.default.isArray(i)?w.default.includeArrays(i,o):-1<o.indexOf(i):i==o},renderItem:function(r,e,t){var n=e.options,o=void 0===n?[]:n,a=e.optionGroups,l=e.optionProps,u=void 0===l?{}:l,i=e.optionGroupProps,d=void 0===i?{}:i,p=t.data,f=t.property,c=e.attrs,s=b(e,t,w.default.get(p,f)),v=E(e,t);if(a){var m=d.options||"options",y=d.label||"label";return[r("el-select",{attrs:c,props:s,on:v},w.default.map(a,function(e,t){return r("el-option-group",{props:{label:e[y]},key:t},I(r,e[m],u))}))]}return[r("el-select",{attrs:c,props:s,on:v},I(r,o,u))]},cellExportMethod:_(n),editCellExportMethod:_(n,!0)},ElCascader:{renderEdit:r(),renderCell:function(e,t,r){return D(0,o(t,r))},renderItem:P(),cellExportMethod:_(o),editCellExportMethod:_(o,!0)},ElDatePicker:{renderEdit:r(),renderCell:function(e,t,r){return D(0,f(t,r))},renderFilter:function(n,o,a){var e=a.column,l=o.attrs;return e.filters.map(function(e,t){var r=e.data;return n(o.name,{key:t,attrs:l,props:g(o,a,r),on:v(o,a,e,function(){M(a,!!e.data,e)})})})},filterMethod:function(e){var t=e.option,r=e.row,n=e.column,o=t.data,a=n.filterRender.props,l=void 0===a?{}:a,u=w.default.get(r,n.property);if(o)switch(l.type){case"daterange":return i(u,o,l,"yyyy-MM-dd");case"datetimerange":return i(u,o,l,"yyyy-MM-dd HH:ss:mm");case"monthrange":return i(u,o,l,"yyyy-MM");default:return u===o}return!1},renderItem:P(),cellExportMethod:_(f),editCellExportMethod:_(f,!0)},ElTimePicker:{renderEdit:r(),renderCell:function(e,t,r){return[s(t,r)]},renderItem:P(),cellExportMethod:_(s),editCellExportMethod:_(s,!0)},ElTimeSelect:{renderEdit:r(),renderItem:P()},ElRate:{renderDefault:r(),renderEdit:r(),renderFilter:y(),filterMethod:x,renderItem:P()},ElSwitch:{renderDefault:r(),renderEdit:r(),renderFilter:function(n,o,a){var e=a.column,l=o.name,u=o.attrs;return e.filters.map(function(e,t){var r=e.data;return n(l,{key:t,attrs:u,props:g(o,a,r),on:v(o,a,e,function(){M(a,w.default.isBoolean(e.data),e)})})})},filterMethod:x,renderItem:P()},ElSlider:{renderDefault:r(),renderEdit:r(),renderFilter:y(),filterMethod:x,renderItem:P()},ElRadio:{renderItem:F()},ElCheckbox:{renderItem:F()},ElButton:{renderDefault:m,renderItem:S},ElButtons:{renderDefault:function(t,e,r){return e.children.map(function(e){return m(t,e,r)[0]})},renderItem:function(t,e,r){return e.children.map(function(e){return S(t,e,r)[0]})}}};function T(e,t,r){for(var n,o=e.target;o&&o.nodeType&&o!==document;){if(r&&o.className&&-1<o.className.split(" ").indexOf(r))n=o;else if(o===t)return{flag:!r||!!n,container:t,targetElem:n};o=o.parentNode}return{flag:!1}}function A(e,t){var r=document.body;if(T(t,r,"el-autocomplete-suggestion").flag||T(t,r,"el-select-dropdown").flag||T(t,r,"el-cascader__dropdown").flag||T(t,r,"el-cascader-menus").flag||T(t,r,"el-time-panel").flag||T(t,r,"el-picker-panel").flag||T(t,r,"el-color-dropdown").flag)return!1}var G={install:function(e){var t=e.interceptor;e.renderer.mixin(C),t.add("event.clearFilter",A),t.add("event.clearActived",A)}};e.VXETablePluginElement=G,"undefined"!=typeof window&&window.VXETable&&window.VXETable.use(G);var R=G;e.default=R});